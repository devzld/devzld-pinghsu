<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-transform"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <title>一次异常OutOfMemoryError</title>
	<meta name="description" content="">
	<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/image/favicon.png">
    <link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/image/favicon.png"/>
    <link href="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/css/highlight.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/css/style.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/css/iconfont/iconfont.css">

    <style>
        #搜索区 {
            max-width: 40em;
            padding: 1em;
            margin: 1em auto;
            border: 1px solid lightgrey;
            margin-top: 100px;
        }
        #搜索输入 {
            display: inline-block;
            padding: .5em;
            width: 100%;
            font-size: 0.8em;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
    </style>
</head>

<body class="bg-grey" gtools_scp_screen_capture_injected="true">

    <header id="header" class="header bg-white">
    <div class="navbar-container">
        <a href="/" class="navbar-logo">
<!--            <img src="/style/image/logo.png" alt="星光的个人博客" />-->
            <span>星光的个人博客</span>
        </a>
        <div class="navbar-menu">
            <a href="/archives">归档</a>
            <a href="/about">关于</a>
        </div>
        <div class="navbar-mobile-menu" onclick="">
            <span class="icon-menu cross"><span class="middle"></span></span>
            <ul>
                <li><a href="/archives">归档</a></li>
                <li><a href="/about">关于</a></li>
            </ul>
        </div>
    </div>
</header>

    <article class="main-content page-page" itemscope itemtype="http://schema.org/Article">
    <div class="post-header">
        <h1 class="post-title" itemprop="name headline">
            一次异常OutOfMemoryError
        </h1>
        <div class="post-data">
            <time itemprop="datePublished">Oct 24, 2019</time>
        </div>
    </div>
</article>
<div class="main-container">
    <div class="post-container">
        <!--<div class="navigation" id="navigation">
            <h1>Contents</h1>
            <ul class="nav sidenav"></ul>
        </div>-->
        <article class="post-content">
            <h3 id="崩溃日志如下">崩溃日志如下：</h3>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java.lang.OutOfMemoryError: pthread_create <span class="o">(</span>1040KB stack<span class="o">)</span> failed: Try again
	at java.lang.Thread.nativeCreate<span class="o">(</span>Native Method<span class="o">)</span>
	at java.lang.Thread.start<span class="o">(</span>Thread.java:1063<span class="o">)</span>
	at java.util.concurrent.ThreadPoolExecutor.addWorker<span class="o">(</span>ThreadPoolExecutor.java:920<span class="o">)</span>
	at java.util.concurrent.ThreadPoolExecutor.ensurePrestart<span class="o">(</span>ThreadPoolExecutor.java:1553<span class="o">)</span>
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute<span class="o">(</span>ScheduledThreadPoolExecutor.java:306<span class="o">)</span>
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule<span class="o">(</span>ScheduledThreadPoolExecutor.java:503<span class="o">)</span>
	at java.util.concurrent.ScheduledThreadPoolExecutor.execute<span class="o">(</span>ScheduledThreadPoolExecutor.java:592<span class="o">)</span>
	at okhttp3.internal.http2.Http2Connection<span class="nv">$ReaderRunnable</span>.applyAndAckSettings<span class="o">(</span>Http2Connection.java:737<span class="o">)</span>
	at okhttp3.internal.http2.Http2Connection<span class="nv">$ReaderRunnable</span>.settings<span class="o">(</span>Http2Connection.java:709<span class="o">)</span>
	at okhttp3.internal.http2.Http2Reader.readSettings<span class="o">(</span>Http2Reader.java:289<span class="o">)</span>
	at okhttp3.internal.http2.Http2Reader.nextFrame<span class="o">(</span>Http2Reader.java:141<span class="o">)</span>
	at okhttp3.internal.http2.Http2Reader.readConnectionPreface<span class="o">(</span>Http2Reader.java:80<span class="o">)</span>
	at okhttp3.internal.http2.Http2Connection<span class="nv">$ReaderRunnable</span>.execute<span class="o">(</span>Http2Connection.java:608<span class="o">)</span>
	at okhttp3.internal.NamedRunnable.run<span class="o">(</span>NamedRunnable.java:32<span class="o">)</span>
	at java.lang.Thread.run<span class="o">(</span>Thread.java:818<span class="o">)</span>
</code></pre></div></div>
<h3 id="原因">原因</h3>
<p>手机限制了线程的最大创建数量，OkHttpClient() 的创建没有采用单例。</p>

<h3 id="解决">解决</h3>
<p>OkHttpClient采用单例模式</p>

        </article>
        <div class="post-content">
         <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/devzld/static@master/blog/md5.min.js"></script>
<div id="gitalk-container"></div>

<script data-no-instant type="text/javascript">
const gitalk = new Gitalk({
  clientID: '1ed81ffadee7491d960d',
  clientSecret: '23951794a420ad09070199a1da082aa8f69574f9',
  repo: 'devzld.github.io',
  owner: 'devzld',
  admin: ['devzld'],
  id: md5(location.pathname),      // Ensure uniqueness and length less than 50
  distractionFreeMode: true  // Facebook-like distraction free mode
})

gitalk.render('gitalk-container')
</script>
        </div>
    </div>
</div>
    
    <footer id="footer" class="footer bg-white">
    <div class="footer-social">
        <div class="footer-container clearfix">
            <div class="social-list">
                <a href="/"><span class='iconfont icon-home'></span>&nbsp;&nbsp;HOME</a>
                <a rel="nofollow" target="_blank" href="https://github.com/devzld"><span class='iconfont icon-github'></span>&nbsp;&nbsp;Github</a>
                <a target="_blank" href="/feed.xml"><span class='iconfont icon-rss'></span>&nbsp;&nbsp;RSS</a>
            </div>
        </div>
    </div>
    <div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <!--<a href="https://devzld.github.io" class="info-logo">
                        <img src="/style/image/logo.png" alt="wonder">
                    </a>-->
                    <div class="info-text">
                        <p>Copyright &copy; 2016 - 2019 <a href="https://devzld.github.io"><code>devzld</code></a></p>
                        <p>Powered by <a href="http://jekyllrb.com" target="_blank" rel="nofollow"><code>jekyll</code></a>，theme is <a href="https://github.com/lightfish-zhang/pinghsu-jekyll" target="_blank" rel="nofollow"><code>pinghsu</code></a></p>
                    </div>
                </div>
            </div>

            <div class="meta-item meta-posts">
                <h3 class="meta-title">RECENT POSTS</h3>
                
                    <li>
                        <a href="/2019-10-24-%E4%BD%BF%E7%94%A8jsdelivr%E5%85%8D%E8%B4%B9CDN%E5%8A%A0%E9%80%9F%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99">使用jsdelivr免费CDN加速你的网站</a>
                    </li>
                
                    <li>
                        <a href="/2019-10-24-%E4%B8%80%E6%AC%A1%E5%BC%82%E5%B8%B8OutOfMemoryError">一次异常OutOfMemoryError</a>
                    </li>
                
                    <li>
                        <a href="/2019-10-24-CursorWindowAllocationException%E5%BC%82%E5%B8%B8">异常android.database.CursorWindowAllocationException</a>
                    </li>
                
            </div>

        </div>
    </div>
</footer>
<!--51la统计-->
<script type="text/javascript" src="//js.users.51.la/20433593.js"></script>
<!-- #end -->
<script src="//cdn.bootcss.com/jquery/1.10.1/jquery.min.js"></script>
<script>
	!window.jQuery && document.write(unescape('%3Cscript src="/style/js/jquery.min.js"%3E%3C/script%3E'))
</script>
<script src="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/js/headroom.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/devzld/devzld.github.io@718f11578b834c5267e68b8d3900cf06da0c9c56/style/js/nav.min.js"></script>
<script type="text/javascript">
    var header = new Headroom(document.getElementById("header"), {
        tolerance: 10,
        offset : 80,
        classes: {
            initial: "animated",
            pinned: "slideDown",
            unpinned: "slideUp"
        }
    });
    header.init();
</script>

<script>window.SmoothScrollOptions = { stepSize: 36 }</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.8/SmoothScroll.min.js"></script>
<script>
	!window.SmoothScroll && document.write(unescape('%3Cscript src="/style/js/SmoothScroll.min.js"%3E%3C/script%3E'))
</script>



  </body>
</html>
